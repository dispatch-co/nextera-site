import Head from 'next/head'
import Link from 'next/link'
import {useEffect,useState} from 'react'
export default function Library(){const [apod,setApod]=useState(null),[mars,setMars]=useState([]);useEffect(()=>{fetch('/api/nasa/apod').then(r=>r.json()).then(j=>setApod(j?.data||null));fetch('/api/nasa/mars?sol=1000').then(r=>r.json()).then(j=>setMars(Array.isArray(j?.data?.photos)?j.data.photos.slice(0,12):[]))},[]);return(<div style={{minHeight:'100vh',background:'black',color:'white',padding:24}}><Head><title>Library</title></Head><h1>Library</h1><Link href="/">Home</Link><div style={{marginTop:16,border:'1px solid #333',borderRadius:12,overflow:'hidden'}}>{apod?<div style={{display:'grid',gridTemplateColumns:'1fr 1fr'}}><img src={apod.url} style={{width:'100%',height:'100%',objectFit:'cover'}}/><div style={{padding:16}}><h2>{apod.title}</h2><p style={{opacity:.8}}>{apod.date}</p><p>{apod.explanation}</p></div></div>:<div style={{padding:16}}>Loading APOD…</div>}</div><h2 style={{marginTop:24}}>Mars Rover Photos (Curiosity — sol 1000)</h2><div style={{display:'grid',gridTemplateColumns:'repeat(4,1fr)',gap:8}}>{mars.map((p:any)=>(<a key={p.id} href={p.img_src} target="_blank" style={{border:'1px solid #333',borderRadius:10,overflow:'hidden'}}><img src={p.img_src} style={{width:'100%',height:160,objectFit:'cover'}}/><div style={{padding:8,fontSize:12,opacity:.8}}>{p.camera?.full_name} • {p.earth_date}</div></a>))}</div></div>)}
